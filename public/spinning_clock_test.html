<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spinning Clock Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>Spinning Clock Test</h1>
        
        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            <strong>Testing the spinning clock implementation from styles.css</strong>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h5>Quick Test Buttons</h5>
            </div>
            <div class="card-body">
                <button class="btn btn-primary me-2" onclick="testSpinningClock()">
                    <i class="fas fa-clock me-2"></i>Test Spinning Clock (5 seconds)
                </button>
                
                <button class="btn btn-success me-2" onclick="blockPage('Manual test message')">
                    <i class="fas fa-lock me-2"></i>Manual Block
                </button>
                
                <button class="btn btn-danger" onclick="unblockPage()">
                    <i class="fas fa-unlock me-2"></i>Manual Unblock
                </button>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h5>Console Commands</h5>
            </div>
            <div class="card-body">
                <p>You can also test in the browser console:</p>
                <code>
                    blockPage('Testing from console')<br>
                    unblockPage()
                </code>
            </div>
        </div>
    </div>

    <!-- Page Blocker Overlay (using styles.css classes) -->
    <div id="pageBlocker" class="page-blocker">
        <div class="loading-clock">
            <i class="fas fa-clock"></i>
        </div>
        <div class="loading-message" id="loadingMessage">
            Loading data...<br>
            <small class="text-muted">Please wait, the page will be available when complete</small>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Simple page blocker using the same implementation as main app
        class SimplePageBlocker {
            constructor() {
                this.blocker = document.getElementById('pageBlocker');
                this.message = document.getElementById('loadingMessage');
                this.isBlocking = false;
                this.init();
            }
            
            init() {
                // Block all interactions during loading
                document.addEventListener('click', (e) => {
                    if (this.isBlocking && !e.target.closest('#pageBlocker')) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('ðŸš« Click blocked during loading');
                        return false;
                    }
                }, true);
            }

            // Block the entire page
            block(message = 'Loading data...') {
                if (this.isBlocking) return;
                
                this.isBlocking = true;
                this.updateMessage(message);
                
                // Add loading class to body (disables all interactions)
                document.body.classList.add('loading-active');
                
                // Show blocker overlay
                if (this.blocker) {
                    this.blocker.classList.add('active');
                }
                
                console.log('ðŸ”’ Page blocked for loading:', message);
            }

            // Unblock the page
            unblock() {
                if (!this.isBlocking) return;
                
                this.isBlocking = false;
                
                // Remove loading class from body (re-enables interactions)
                document.body.classList.remove('loading-active');
                
                // Hide blocker overlay
                if (this.blocker) {
                    this.blocker.classList.remove('active');
                }
                
                console.log('ðŸ”“ Page unblocked - loading complete');
            }

            // Update loading message
            updateMessage(message) {
                if (this.message) {
                    this.message.innerHTML = message + '<br><small class="text-muted">Please wait, the page will be available when complete</small>';
                }
            }

            // Check if currently blocking
            isActive() {
                return this.isBlocking;
            }
        }

        // Initialize the simple page blocker
        const pageBlocker = new SimplePageBlocker();

        // Global functions for easy integration
        window.blockPage = function(message) {
            pageBlocker.block(message);
        };

        window.unblockPage = function() {
            pageBlocker.unblock();
        };

        window.isPageBlocked = function() {
            return pageBlocker.isActive();
        };

        // Test function
        function testSpinningClock() {
            console.log('ðŸ§ª Testing spinning clock for 5 seconds...');
            blockPage('Testing spinning clock animation...');
            
            setTimeout(() => {
                unblockPage();
                console.log('âœ… Spinning clock test complete!');
            }, 5000);
        }

        console.log('ðŸš€ Spinning Clock Test Page Ready!');
        console.log('Available functions: blockPage(), unblockPage(), testSpinningClock()');
    </script>
</body>
</html>
