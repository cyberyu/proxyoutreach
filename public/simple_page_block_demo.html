<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Loading Block Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Simple Full-Screen Blocking Overlay */
        .page-blocker {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(240, 240, 240, 0.95);
            z-index: 99999;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            cursor: wait;
        }

        .page-blocker.active {
            display: flex;
        }

        /* Spinning Clock Icon */
        .loading-clock {
            font-size: 4rem;
            color: #6c757d;
            animation: clock-spin 2s linear infinite;
            margin-bottom: 1.5rem;
        }

        @keyframes clock-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Loading Message */
        .loading-message {
            font-size: 1.2rem;
            color: #495057;
            font-weight: 500;
            text-align: center;
            max-width: 400px;
        }

        /* Disable page content when loading */
        body.loading-active {
            pointer-events: none;
            user-select: none;
        }

        body.loading-active * {
            cursor: wait !important;
        }

        /* Keep the blocker interactive */
        .page-blocker {
            pointer-events: auto;
        }

        /* Demo content styling */
        .demo-card {
            transition: opacity 0.3s ease;
        }

        .demo-card.loading {
            opacity: 0.3;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="text-center mb-5">
            <h1 class="display-4 text-primary">
                <i class="fas fa-clock me-3"></i>Simple Loading Block Demo
            </h1>
            <p class="lead">Complete page blocking with spinning clock until data loads</p>
        </div>

        <!-- Demo Controls -->
        <div class="row mb-4">
            <div class="col-md-3 mb-3">
                <button id="demo3Second" class="btn btn-primary btn-lg w-100">
                    <i class="fas fa-database me-2"></i>3 Second Load
                </button>
                <small class="text-muted d-block mt-1">Simulate 3-second data loading</small>
            </div>
            <div class="col-md-3 mb-3">
                <button id="demo5Second" class="btn btn-info btn-lg w-100">
                    <i class="fas fa-cloud-download-alt me-2"></i>5 Second Load
                </button>
                <small class="text-muted d-block mt-1">Simulate 5-second operation</small>
            </div>
            <div class="col-md-3 mb-3">
                <button id="demo10Second" class="btn btn-warning btn-lg w-100">
                    <i class="fas fa-cogs me-2"></i>10 Second Load
                </button>
                <small class="text-muted d-block mt-1">Simulate heavy processing</small>
            </div>
            <div class="col-md-3 mb-3">
                <button id="clearDemo" class="btn btn-secondary btn-lg w-100">
                    <i class="fas fa-stop me-2"></i>Stop Loading
                </button>
                <small class="text-muted d-block mt-1">Force clear loading state</small>
            </div>
        </div>

        <!-- Demo Content - These will be unusable during loading -->
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card demo-card">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0">Dashboard Data</h5>
                    </div>
                    <div class="card-body">
                        <h3 class="text-success">1,247 Records</h3>
                        <p>Try clicking these elements during loading - they won't work!</p>
                        <button class="btn btn-success">Update Data</button>
                        <button class="btn btn-outline-success ms-2">Refresh</button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 mb-4">
                <div class="card demo-card">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">User Actions</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group mb-3">
                            <label class="form-label">Search:</label>
                            <input type="text" class="form-control" placeholder="Type something...">
                        </div>
                        <button class="btn btn-info">Search</button>
                        <button class="btn btn-outline-info ms-2">Filter</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <div class="card demo-card">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">Data Table (Unusable During Loading)</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Company</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>Apple Inc.</td>
                                    <td><span class="badge bg-success">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-primary">Edit</button>
                                        <button class="btn btn-sm btn-danger ms-1">Delete</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Microsoft Corp.</td>
                                    <td><span class="badge bg-warning">Pending</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-primary">Edit</button>
                                        <button class="btn btn-sm btn-danger ms-1">Delete</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>Google LLC</td>
                                    <td><span class="badge bg-info">Processing</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-primary">Edit</button>
                                        <button class="btn btn-sm btn-danger ms-1">Delete</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Display -->
        <div class="alert alert-info mt-4">
            <h5><i class="fas fa-info-circle me-2"></i>Loading Status</h5>
            <p id="statusMessage" class="mb-0">Ready - Click any demo button to see complete page blocking with spinning clock</p>
        </div>
    </div>

    <!-- Simple Page Blocker Overlay -->
    <div id="pageBlocker" class="page-blocker">
        <div class="loading-clock">
            <i class="fas fa-clock"></i>
        </div>
        <div class="loading-message" id="loadingMessage">
            Loading data...<br>
            <small class="text-muted">Please wait, the page will be available when complete</small>
        </div>
    </div>

    <script>
        class SimplePageBlocker {
            constructor() {
                this.blocker = document.getElementById('pageBlocker');
                this.message = document.getElementById('loadingMessage');
                this.status = document.getElementById('statusMessage');
                this.isBlocking = false;
            }

            // Block the entire page
            block(message = 'Loading data...') {
                if (this.isBlocking) return;
                
                this.isBlocking = true;
                this.message.innerHTML = message + '<br><small class="text-muted">Please wait, the page will be available when complete</small>';
                
                // Add loading class to body (disables all interactions)
                document.body.classList.add('loading-active');
                
                // Show blocker overlay
                this.blocker.classList.add('active');
                
                // Grey out content
                document.querySelectorAll('.demo-card').forEach(card => {
                    card.classList.add('loading');
                });
                
                this.updateStatus('PAGE BLOCKED - All interactions disabled until loading completes');
                
                console.log('ðŸ”’ Page blocked for loading:', message);
            }

            // Unblock the page
            unblock() {
                if (!this.isBlocking) return;
                
                this.isBlocking = false;
                
                // Remove loading class from body (re-enables interactions)
                document.body.classList.remove('loading-active');
                
                // Hide blocker overlay
                this.blocker.classList.remove('active');
                
                // Restore content appearance
                document.querySelectorAll('.demo-card').forEach(card => {
                    card.classList.remove('loading');
                });
                
                this.updateStatus('âœ… Page unblocked - All interactions enabled');
                
                console.log('ðŸ”“ Page unblocked - loading complete');
            }

            // Update status message
            updateStatus(message) {
                this.status.textContent = message;
            }

            // Check if currently blocking
            isActive() {
                return this.isBlocking;
            }

            // Simulate data loading with automatic unblock
            simulateLoading(duration, description = 'Loading data') {
                if (this.isBlocking) {
                    console.warn('Already loading, ignoring request');
                    return;
                }

                this.block(description + '...');
                
                setTimeout(() => {
                    this.unblock();
                    this.updateStatus(`âœ… Loading completed after ${duration/1000} seconds - Page fully functional`);
                }, duration);
            }
        }

        // Initialize the page blocker
        const pageBlocker = new SimplePageBlocker();

        // Event handlers
        document.addEventListener('DOMContentLoaded', function() {
            pageBlocker.updateStatus('ðŸš€ Demo ready! Click any button to see complete page blocking.');

            // 3 Second Demo
            document.getElementById('demo3Second').addEventListener('click', function() {
                if (pageBlocker.isActive()) return;
                pageBlocker.simulateLoading(3000, 'Loading dashboard data');
            });

            // 5 Second Demo
            document.getElementById('demo5Second').addEventListener('click', function() {
                if (pageBlocker.isActive()) return;
                pageBlocker.simulateLoading(5000, 'Downloading large dataset');
            });

            // 10 Second Demo
            document.getElementById('demo10Second').addEventListener('click', function() {
                if (pageBlocker.isActive()) return;
                pageBlocker.simulateLoading(10000, 'Processing heavy computation');
            });

            // Clear Demo
            document.getElementById('clearDemo').addEventListener('click', function() {
                pageBlocker.unblock();
                pageBlocker.updateStatus('ðŸ›‘ Loading forcefully stopped - Page is now interactive');
            });

            // Prevent any actions during loading (extra safety)
            document.addEventListener('click', function(e) {
                if (pageBlocker.isActive() && !e.target.closest('#pageBlocker')) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('ðŸš« Click blocked during loading');
                    return false;
                }
            }, true);

            // Block form submissions during loading
            document.addEventListener('submit', function(e) {
                if (pageBlocker.isActive()) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('ðŸš« Form submission blocked during loading');
                    return false;
                }
            }, true);

            // Block keyboard events during loading
            document.addEventListener('keydown', function(e) {
                if (pageBlocker.isActive() && e.target.closest('#pageBlocker') === null) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('ðŸš« Keyboard input blocked during loading');
                    return false;
                }
            }, true);
        });

        // Global functions for integration with your app
        window.blockPage = function(message) {
            pageBlocker.block(message);
        };

        window.unblockPage = function() {
            pageBlocker.unblock();
        };

        window.isPageBlocked = function() {
            return pageBlocker.isActive();
        };
    </script>
</body>
</html>
